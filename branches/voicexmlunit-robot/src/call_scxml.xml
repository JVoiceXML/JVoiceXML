<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0"
       initialstate="idle">

  <state id="idle">
    <transition event="run" target="tape.started" />
  </state>

  <state id="tape.started">
    <transition event="dialog.start" target="tape.connected" />
    <transition event="tape.stop" target="idle" />
  </state>

  <state id="tape.connected">
    <transition event="dialog.run" target="session.active" />
    <transition event="tape.stop" target="idle" />
  </state>

  <state id="session.active">
    <transition event="session.end" target="tape.connected" />
    <transition event="dialog.consume" target="session.active" />
    <transition event="dialog.produce" target="session.active" />
    <transition event="session.hangup" target="tape.started" />
  </state>

</scxml>
